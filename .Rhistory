my_v1 = ARIMA(Monthly_Anomaly ~ pdq(0, 1, 1) + PDQ(0, 0, 1)),
my_v2 = ARIMA(Monthly_Anomaly ~ pdq(3, 1, 0) + PDQ(0, 0, 1))
) |>
augment() |>
filter(.model == 'my_v2') |>
features(.resid, ljung_box, lag = 36, dof = 5)
temp_tr |>
model(
auto = ARIMA(),
my_v1 = ARIMA(Monthly_Anomaly ~ pdq(0, 1, 1) + PDQ(0, 0, 1)),
my_v2 = ARIMA(Monthly_Anomaly ~ pdq(3, 1, 1) + PDQ(0, 0, 1))
) |>
forecast(new_data = temp_tst) |>
accuracy(temp_tst)
temp_tr |>
model(
auto = ARIMA(),
my_v1 = ARIMA(Monthly_Anomaly ~ pdq(0, 1, 1) + PDQ(0, 0, 1)),
my_v2 = ARIMA(Monthly_Anomaly ~ pdq(3, 1, 0) + PDQ(0, 0, 1))
) |>
forecast(new_data = temp_tst) |>
accuracy(temp_tst)
temp_tr |>
model(
auto = ARIMA(),
my_v1 = ARIMA(Monthly_Anomaly ~ pdq(0, 1, 1) + PDQ(0, 0, 1)),
my_v2 = ARIMA(Monthly_Anomaly ~ pdq(4, 1, 0) + PDQ(0, 0, 1))
) |>
augment() |>
filter(.model == 'my_v2') |>
features(.resid, ljung_box, lag = 24, dof = 6)
temp_tr |>
model(
auto = ARIMA(),
my_v1 = ARIMA(Monthly_Anomaly ~ pdq(0, 1, 1) + PDQ(0, 0, 1)),
my_v2 = ARIMA(Monthly_Anomaly ~ pdq(4, 1, 0) + PDQ(0, 0, 1))
) |>
forecast(new_data = temp_tst) |>
accuracy(temp_tst)
temp_tr |>
model(
auto = ARIMA(),
my_v1 = ARIMA(Monthly_Anomaly ~ pdq(0, 1, 1) + PDQ(0, 0, 1)),
my_v2 = ARIMA(Monthly_Anomaly ~ pdq(3, 1, 0) + PDQ(1, 0, 0))
) |>
forecast(new_data = temp_tst) |>
accuracy(temp_tst)
temp_tr |>
model(
auto = ARIMA(),
my_v1 = ARIMA(Monthly_Anomaly ~ pdq(0, 1, 1) + PDQ(0, 0, 1)),
my_v2 = ARIMA(Monthly_Anomaly ~ pdq(3, 1, 0) + PDQ(0, 0, 1))
) |>
forecast(new_data = temp_tst) |>
accuracy(temp_tst)
temp_tr |>
model(
auto = ARIMA(),
my_v1 = ARIMA(Monthly_Anomaly ~ pdq(0, 1, 2) + PDQ(0, 0, 1)),
my_v2 = ARIMA(Monthly_Anomaly ~ pdq(3, 1, 0) + PDQ(0, 0, 1))
) |>
forecast(new_data = temp_tst) |>
accuracy(temp_tst)
temp_tr |>
model(
auto = ARIMA(),
my_v1 = ARIMA(Monthly_Anomaly ~ pdq(0, 1, 1) + PDQ(0, 0, 1)),
my_v2 = ARIMA(Monthly_Anomaly ~ pdq(3, 1, 0) + PDQ(0, 0, 1))
) |>
forecast(new_data = temp_tst) |>
accuracy(temp_tst)
temp_tr |>
model(
auto = ARIMA(),
my_v1 = ARIMA(Monthly_Anomaly ~ pdq(0, 1, 1) + PDQ(0, 0, 1)),
my_v2 = ARIMA(Monthly_Anomaly ~ pdq(0, 1, 1) + PDQ(0, 0, 1))
) |>
augment() |>
filter(.model == 'my_v2') |>
features(.resid, ljung_box, lag = 24, dof = 4)
temp_tr |>
model(
auto = ARIMA(),
my_v1 = ARIMA(Monthly_Anomaly ~ pdq(0, 1, 1) + PDQ(0, 0, 1)),
my_v2 = ARIMA(Monthly_Anomaly ~ pdq(0, 1, 1) + PDQ(0, 0, 1))
) |>
augment() |>
filter(.model == 'my_v2') |>
features(.resid, ljung_box, lag = 24, dof = 6)
temp_tr |>
model(
auto = ARIMA(),
my_v1 = ARIMA(Monthly_Anomaly ~ pdq(0, 1, 1) + PDQ(0, 0, 1)),
my_v2 = ARIMA(Monthly_Anomaly ~ pdq(0, 1, 1) + PDQ(0, 0, 1))
) |>
augment() |>
filter(.model == 'my_v2') |>
features(.resid, ljung_box, lag = 24, dof = 2)
head(temp_tst)
tail(temp_tst)
temp_data |>
ggtime::gg_tsdisplay(
Monthly_Anomaly,
plot_type = 'partial'
)
temp_tr |>
ggtime::gg_tsdisplay(
Monthly_Anomaly,
plot_type = 'partial'
)
temp_tr |>
features(Monthly_Anomaly, c(unitroot_kpss, unitroot_ndiffs, unitroot_nsdiffs))
library(gt)
temp_data |>
features(Monthly_Anomaly, c(unitroot_kpss, unitroot_ndiffs, unitroot_nsdiffs)) |>
gt()
temp_tr |>
ggtime::gg_tsdisplay(
Monthly_Anomaly |> difference(),
plot_type = 'partial'
)
temp_tr |>
ggtime::gg_tsdisplay(
Monthly_Anomaly |> difference() |> difference(),
plot_type = 'partial'
)
temp_tr |>
ggtime::gg_tsdisplay(
Monthly_Anomaly |> difference(),
plot_type = 'partial'
)
temp_fc <- temp_tr |>
model(
auto = ARIMA(),
mine = ARIMA(Monthly_Anomaly ~ pdq(0, 1, 1) + PDQ(0, 0, 1))
) |>
forecast(new_data = temp_tst)
head(forecast)
forecast
head(temp_fc)
temp_tr |>
autoplot() +
autolayer(temp_fc) +
facet_grid(~ .model, rows = 1)
temp_tr |>
autoplot() +
autolayer(temp_fc) +
facet_grid(~ .model)
temp_tr |>
autoplot() +
autolayer(temp_fc) +
facet_grid(~ .model) +
theme_minimal()
temp_tr |>
autoplot() +
autolayer(temp_fc) +
facet_grid(~ .model) +
labs(y = "Monthly Anomaly")
?facet_grid
temp_tr |>
autoplot() +
autolayer(temp_fc) +
facet_grid(~ .model, labeller = labeller("Date [1M]" = 'Date')) +
theme_minimal()
temp_tr |>
autoplot() +
autolayer(temp_fc) +
facet_grid(~ .model, labeller = labeller("auto" = 'Auto')) +
theme_minimal()
temp_tr |>
autoplot() +
autolayer(temp_fc) +
facet_grid(~ .model) +
labs(x = 'Date') +
theme_minimal()
temp_fc <- temp_tr |>
model(
Auto = ARIMA(),
Custom = ARIMA(Monthly_Anomaly ~ pdq(0, 1, 1) + PDQ(0, 0, 1))
) |>
forecast(new_data = temp_tst)
temp_tr |>
autoplot() +
autolayer(temp_fc) +
facet_grid(~ .model) +
labs(x = 'Date', y = 'Month') +
theme_minimal()
temp_tr |>
autoplot() +
autolayer(temp_fc) +
facet_grid(~ .model) +
labs(x = 'Date', y = 'Monthly Anomaly') +
theme_minimal()
temp_fc <- temp_tr |>
model(
Auto = ARIMA()
) |> report()
temp_fc <- temp_tr |>
model(
Custom = ARIMA(Monthly_Anomaly ~ pdq(0, 1, 1) + PDQ(0, 0, 1))
) |> report()
temp_fc <- temp_tr |>
model(
Custom = ARIMA(Monthly_Anomaly ~ 1e-04 + pdq(0, 1, 1) + PDQ(0, 0, 1))
) |> report()
temp_fc <- temp_tr |>
model(
Custom = ARIMA(Monthly_Anomaly ~ .0001 + pdq(0, 1, 1) + PDQ(0, 0, 1))
) |> report()
temp_fc <- temp_tr |>
model(
Custom = ARIMA(Monthly_Anomaly ~ 1 + pdq(0, 1, 1) + PDQ(0, 0, 1))
) |> report()
temp_fc <- temp_tr |>
model(
Auto = ARIMA(),
Custom = ARIMA(Monthly_Anomaly ~ 1 + pdq(0, 1, 1) + PDQ(0, 0, 1))
) |>
forecast(new_data = temp_tst)
temp_tr |>
autoplot() +
autolayer(temp_fc) +
facet_grid(~ .model) +
labs(x = 'Date', y = 'Monthly Anomaly') +
theme_minimal()
head(temp_fc)
temp_fc <- temp_tr |>
model(
Auto = ARIMA(),
Custom = ARIMA(Monthly_Anomaly ~ pdq(0, 1, 1) + PDQ(0, 0, 1))
) |>
forecast(new_data = temp_tst) |>
accuracy(temp_tst)
temp_tr |>
model(
Auto = ARIMA(),
Custom = ARIMA(Monthly_Anomaly ~ pdq(0, 1, 1) + PDQ(0, 0, 1))
) |>
forecast(new_data = temp_tst) |>
accuracy(temp_tst)
temp_tr |>
model(
Auto = ARIMA(),
Custom = ARIMA(Monthly_Anomaly ~ pdq(0, 1, 1) + PDQ(0, 0, 1))
) |>
forecast(new_data = temp_tst) |>
accuracy(temp_tst) |>
select(c(.model, ME, RMSE, MAE, MPE)) |>
gt()
temp_tr |>
model(
Auto = ARIMA(),
Custom = ARIMA(Monthly_Anomaly ~ pdq(0, 1, 1) + PDQ(0, 0, 1))
) |>
forecast(new_data = temp_tst) |>
accuracy(temp_tst) |>
select(c(.model, ME, RMSE, MAE, MPE)) |>
gt() |>
cols_label(
.model = 'Model'
) |>
fmt_number(
digits = 4
)
?fmt_number
temp_tr |>
model(
Auto = ARIMA(),
Custom = ARIMA(Monthly_Anomaly ~ pdq(0, 1, 1) + PDQ(0, 0, 1))
) |>
forecast(new_data = temp_tst) |>
accuracy(temp_tst) |>
select(c(.model, ME, RMSE, MAE, MPE)) |>
gt() |>
cols_label(
.model = 'Model'
) |>
fmt_number(
decimals = 4
)
temp_tr |>
model(
Auto = ARIMA(),
Custom = ARIMA(Monthly_Anomaly ~ pdq(0, 1, 1) + PDQ(0, 0, 1))
) |>
forecast(new_data = temp_tst) |>
accuracy(temp_tst) |>
select(c(.model, ME, RMSE, MAE, MPE)) |>
gt() |>
cols_label(
.model = 'Model'
) |>
fmt_number(
decimals = 4
) |>
tab_style(
style = cell_text(weight='bold'),
locations = cells_column_labels(columns=everything())
)
temp_tr |>
model(
Auto = ARIMA(),
Custom = ARIMA(Monthly_Anomaly ~ pdq(0, 1, 1) + PDQ(0, 0, 1))
) |>
forecast(new_data = temp_tst) |>
accuracy(temp_tst) |>
select(c(.model, ME, RMSE, MAE, MPE)) |>
gt() |>
cols_label(
.model = 'Model'
) |>
fmt_number(
decimals = 4
) |>
tab_style(
style = cell_text(weight='bold'),
locations = cells_column_labels(columns=everything())
) |>
opt_horizontal_padding(sclae=2)
temp_tr |>
model(
Auto = ARIMA(),
Custom = ARIMA(Monthly_Anomaly ~ pdq(0, 1, 1) + PDQ(0, 0, 1))
) |>
forecast(new_data = temp_tst) |>
accuracy(temp_tst) |>
select(c(.model, ME, RMSE, MAE, MPE)) |>
gt() |>
cols_label(
.model = 'Model'
) |>
fmt_number(
decimals = 4
) |>
tab_style(
style = cell_text(weight='bold'),
locations = cells_column_labels(columns=everything())
) |>
opt_horizontal_padding(scale=2)
temp_tr |>
model(
Auto = ARIMA(),
Custom = ARIMA(Monthly_Anomaly ~ pdq(0, 1, 1) + PDQ(0, 0, 1))
) |>
forecast(new_data = temp_tst) |>
accuracy(temp_tst) |>
select(c(.model, ME, RMSE, MAE, MPE)) |>
arrange(RMSE) |>
gt() |>
cols_label(
.model = 'Model'
) |>
fmt_number(
decimals = 4
) |>
tab_style(
style = cell_text(weight='bold'),
locations = cells_column_labels(columns=everything())
) |>
opt_horizontal_padding(scale=2)
?SARIMA
library(fpp3)
q2_series <- c(0, 3.3, 6.6, 7.2, 3.7, 1.6, 2, 2, 1.6, 1.3, -0.2, -3, -4.6, -5.5, -5.3, -6.2, -8.5, -10.7, -9.7, -6.8, -5.8, -8.6, -10.6, -9.7, -8.4, -7, -7.2, -7.6, -7.5, -6.7, -6.2, -6, -4.4, -2.6, -2.7, -4, -4.6, -3.5, -1.3, -0.3, -2.1, -3.2, -3.5, -3.2, -2.2, -1.6, -3.7, -4.9, -6.1, -6.7)
q2_ts <- tsibble(x = 1:length(q2_series), y = q2_series, index = x)
q2_ts |> features(y, unitroot_kpss, type = 'tau')
# A tibble: 1 Ã— 2
kpss_stat kpss_pvalue
q2_ts |> gg_tsdisplay(y, plot_type = 'partial')
q3_ts |> features(d1, unitroot_kpss, type = 'tau')
q3_ts |> gg_tsdisplay(d1, plot_type = 'partial')
q3_ts <- q2_ts |>
mutate(d1 = difference(y))
q3_ts |> features(d1, unitroot_kpss, type = 'tau')
q3_ts |> gg_tsdisplay(d1, plot_type = 'partial')
q3_ts |> features(d1, c(unitroot_ndiffs, unitroot_nsdiffs), type = 'tau')
q2_ts |> features(y, c(unitroot_ndiffs, unitroot_nsdiffs), type = 'tau')
aus_arrivals |>
aus_arrivals |>
difference() |>
autoplot()
head(aus_arrivals)
aus_arrivals |>
filter(Origin == "Japan") |>
difference(Arrivals, 1) |>
autoplot()
aus_arrivals |>
filter(Origin == "Japan") |>
difference(1) |>
autoplot()
aus_arrivals |>
filter(Origin == "Japan") |>
autoplot()
aus_arrivals |>
filter(Origin == "Japan") |>
gg_tsdisplay(
Arrivals,
plot_type = 'partial'
)
aus_arrivals |>
filter(Origin == "Japan") |>
gg_tsdisplay(
Arrivals |> difference(),
plot_type = 'partial'
)
aus_arrivals |>
filter(Origin == "Japan") |>
gg_tsdisplay(
Arrivals |> difference(4),
plot_type = 'partial'
)
aus_arrivals |>
filter(Origin == "Japan") |>
gg_tsdisplay(
Arrivals |> difference(4) |> difference(),
plot_type = 'partial'
)
aus_arrivals |>
filter(Origin == "Japan") |>
gg_tsdisplay(
Arrivals |> difference(4),
plot_type = 'partial'
)
aus_arrivals |>
filter(Origin == "Japan") |>
gg_tsdisplay(
Arrivals |> difference(),
plot_type = 'partial'
)
aus_arrivals |>
filter(Origin == "Japan") |>
gg_tsdisplay(
Arrivals |> difference(4) |> difference(),
plot_type = 'partial'
)
aus_arrivals |>
filter(Origin == "Japan") |>
mutate(Arrivals = Arrivals |> difference(4) |> difference()) |>
model(
ARIMA(Arrivals ~ pdq(q=1) + PDQ(Q=1, period=4))
) |>
report()
aus_arrivals |>
filter(Origin == "Japan") |>
model(
ARIMA(Arrivals ~ pdq(0, 1, 1) + PDQ(0, 1, 1, period=4))
) |>
report()
model(
ARIMA(Arrivals ~ pdq(p=1) + PDQ(P=1, period=4))
) |>
report()
aus_arrivals |>
filter(Origin == "Japan") |>
mutate(Arrivals = Arrivals |> difference(4) |> difference(1)) |>
model(
ARIMA(Arrivals ~ pdq(p=1) + PDQ(P=1, period=4))
) |>
report()
?ARIMA
aus_arrivals |>
filter(Origin == "Japan") |>
model(
ARIMA(Arrivals ~ pdq(p=0) + PDQ(P=0))
) |>
report()
aus_arrivals |>
filter(Origin == "Japan") |>
gg_tsdisplay(
Arrivals |> difference(4) |> difference(),
plot_type = 'partial'
)
aus_arrivals |>
filter(Origin == "Japan") |>
gg_tsdisplay(
Arrivals |> difference(1) |> difference(4),
plot_type = 'partial'
)
gafa_stock |>
filter(Symbol == "AMZN") |>
mutate(t = row_number()) |>
update_tsibble(index = t, regular = TRUE) |>
model(ARIMA(Close ~ pdq(1,0,0) + 1)) |>
report()
aus_arrivals |>
filter(Origin == "Japan") |>
gg_tsdisplay(
Arrivals |> difference(1) |> difference(4),
plot_type = 'partial'
)
library(fpp3)
aus_arrivals |>
filter(Origin == "Japan") |>
gg_tsdisplay(
Arrivals |> difference(1) |> difference(4),
plot_type = 'partial'
)
aus_arrivals |>
filter(Origin == 'Japan') |>
model(ARIMA(Arrivals ~ pdq(p=0) + PDQ(P=0))    ) |>
report()
aus_arrivals |>
filter(Origin == "Japan") |>
gg_tsdisplay(
Arrivals |> difference(1),
plot_type = 'partial'
)
file.path(R.home("bin"), "Rscript")
R.version
getwd()
file.path(R.home("bin"), "Rscript")
setwd("C:/Users/tkbar/ADS/ADS506-Final-Project")
mkdir data
